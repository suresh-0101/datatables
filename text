function buildColumnsFromJson(jsonCols) {
  var columns = [];

  for (var i = 0; i < jsonCols.length; i++) {
    var col = jsonCols[i];

    if (col.VISIBLE !== true) {
      continue; // skip hidden columns
    }

    columns.push({
      data: toDataKey(col.NAME),
      title: col.NAME,
      visible: col.VISIBLE,
      createdCell: col.TOOLTIP ? function (td, cellData) {
        td.title = cellData || '';
      } : null
    });
  }

  return columns;
}
